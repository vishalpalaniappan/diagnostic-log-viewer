# Diagnostic Log Viewer

The Diagnostic Log Viewer is a tool which can be used to view and interact with Compressed Diagnostic Log (CDL) files. See background for more information on [CDL files](# Background). The viewer can be used to step through the execution sequence of a program while investigating the call stack, variables and exceptions for each position in the program.

# Demo 

A demo of the viewer is available here.
* The demo loads a CDL file generated by running compress.py in the yscope-previews/clp-s-s3 repo.
* The compress.py program was injected with diagnostic logs using the Automated Diagnostic Log Injector (ADLI) tool and run to generate this CDL file. The ADLI tool will be released shortly.

# How does it work? 

The Diagnostic Log Viewer spawns a worker to do the following: 

* Parses the header of the CDL file to extract the Simplified Syntax Tree (SST) and the source code. 
* Traverses the SST and builds a log type map for each logtype contained in the file. 
* Traverses the body of the CDL file and extracts the execution sequence as well as the corresponding variables and exceptions.
* Extracts the stack trace for each position, effectively collapsing the whole file. 
* Exposes functions to debug the program.

The React application creates a CDL Provider which exposes all relevant data in contexts that can be consumed by child components. The worker itself is also passed down the component tree allowing child components to communicate with the worker directly. Each child component consumes the relevant context and provides an interface for the user to interact with the program.

# Background

> [!NOTE]  
> A more detailed introduction to diagnostic logging and the diagnostic tools it enables is in development.

CDL files are generated through a process called Diagnostic Logging (DL) in which the instructions, variable values and exceptions for each line of code are logged. Diagnostic logging is practically enabled by the Automated Diagnostic Log Injector (ADLI) tools, which automatically inserts the necessary log statements to extract the diagnostic information. 

![Simplified ASP System Diagram](docs/Simplified_System_Diagram_ASP.png)

The ADLI tool uses Abstract Syntax Trees (AST's) to traverse through the structure of the program to insert the necessary log statements. It also appends a Simplified Syntax Tree (SST) of the program in the header of the CDL file which provides a map for each logtype and variable contained in the log file. This effectively compresses the logtypes at the source while logging because only the log type IDâ€™s are added in the inserted log statements.

When diagnostic logs are ingested by CLP, the performance will be much better compared to unstructured/JSON logs and the implementation will be simpler. It will be possible to further compress the logs by grouping variable values since a map of all variables are provided in the SST.

Using Diagnostic Logging, it will be possible to build a fully automated log based diagnostic solution that can perform fully automated root cause analysis. 

# Providing feedback

You can use GitHub issues to [report a bug][bug-report] or [request a feature][feature-req].

# Docs

In development.

# Contributing

In development.


[bug-report]: https://github.com/vishalpalaniappan/diagnostic-log-viewer/issues
[feature-req]: https://github.com/vishalpalaniappan/diagnostic-log-viewer/issues
